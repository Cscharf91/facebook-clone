<h3><%= @user.first_name %>'s Profile</h3>
  <% requested = @user.received_requests.find { |request| request.requestor_id = current_user.id } %>
  <% friendship = @user.friendships.find_by(friend_id: current_user.id) %>

  <% unless @user.id == current_user.id %>
  <% if friendship %>
    <%= button_to 'Delete Friend', friendship_path(friendship), method: :delete %>
  <% elsif requested %>
    <%= button_to 'Delete Friend Request', friend_request_path(requested), method: :delete %>
  <% else %>
    <%= button_to 'Add Friend', friend_requests_path(requestor_id: current_user.id, receiver_id: @user.id), method: :post %>
  <% end %>
  <% end %>

<% if @user.id == current_user.id %>
  <%= link_to "Edit Profile", edit_user_path(@user) %><br><br>
<% end %>

Full Name: <%= @user.first_name %> 
<%= @user.last_name %><br><br>
Age: <%= @user.age %><br><br>
Location: <%= @user.location %><br><br>
Occupation: <%= @user.occupation %><br><br>
Bio: <%= @user.bio %><br><br><br><br>

<h4>Friends</h4>
<% if @user.friends.count > 0 %>
  <% @user.friends.each do |friend| %>
    <%= link_to friend.first_name + ' ' + friend.last_name, profile_user_path(friend) %><br><br>
  <% end %>
<% end %>

<br><br><br><br><h4>Posts</h4>
<% @user.posts.each do |post| %>
  <%= post.message %>
<% end %>